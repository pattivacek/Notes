Useful bitbake commands:
https://community.nxp.com/docs/DOC-94953


Never remove any files by hand from the tmp/deploy directory inside the Build Directory. Always use the various BitBake clean tasks to clear out previous build artifacts.
Clean up your tmp dir for the given package:
$ bitbake -c clean foo
Clean shared state (roughly the same as removing tmp and sstate-cache):
$ bitbake -c cleansstate linux-yocto
Roughly the same as removing tmp, sstate-cache, and downloads:
$ bitbake -c cleanall linux-yocto


# native, nativesdk, cross, etc.
# https://lists.yoctoproject.org/pipermail/yocto/2015-January/023126.html
By default, recipes bake binaries for the target architecture that is described in the MACHINE variable in the local.conf.
One can use BBCLASSEXTEND = "native nativesdk" to bake binaries for the host architecture (native) and for target sdk architecture. The target sdk architecture is described in the SDKMACHINE variable and the host architecture is the architecture of the machine executing bitbake. BBCLASSEXTEND = "native nativesdk" will alow you to bake recipes that are "virtual" using the suffix native ( so ${PN}-native) and the prefix nativesdk (so nativesdk-${PN}).
Recipes that are cross need to inherit cross.bbclass. They are used for cross tools, i.e. tools that need to run in the native context and produce some binary output for the target.


# Format according to OE styleguide (mostly just recommended variable order, but might be out of date and doesn't understand everything):
meta-openembedded/contrib/oe-stylize.py


# Building for debug hack:
For every binary you want to debug (executables and shared libraries alike) you need to add these two lines in the recipe:

INHIBIT_PACKAGE_DEBUG_SPLIT = "1"
INHIBIT_PACKAGE_STRIP = "1"

You also need to make it build with debug symbols, which is recipe-dependent. For akualizr it means specifying

-DCMAKE_BUILD_TYPE=Debug

instead of Release. I suspect that it's not the proper way, but it's simple and straightforward. It doesn't install the sources on the device though, so I normally open the source file on my host machine.


# Device runs out of space too soon:
IMAGE_ROOTFS_EXTRA_SPACE = "565536"
IMAGE_OVERHEAD_FACTOR = "3"


# Using devtool for patching the soruce of a recipe:
https://wiki.yoctoproject.org/wiki/TipsAndTricks/Patching_the_source_for_a_recipe
